rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {

    // Users collection: Allow authenticated users to read and write only their own documents
    // This ensures user privacy and prevents unauthorized access to other users' data
    match /users/{userId} {
      allow read, write: if request.auth != null && request.auth.uid == userId;
    }

    // Rides collection: Basic rules for future use
    // Currently allows authenticated users to read and write rides
    // In production, consider more granular permissions based on user roles (e.g., drivers vs passengers)
    match /rides/{rideId} {
      allow read, write: if request.auth != null;
    }

    // Default deny rule for any other collections not explicitly defined
    // This is a security best practice to prevent accidental data exposure
    match /{document=**} {
      allow read, write: if false;
    }
  }
}